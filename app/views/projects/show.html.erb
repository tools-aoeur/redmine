<%
  ZAppEngine.start_capture_requested_assets
  override = ViewOverride.project_overview
                         .active_instance
                         .select { |vo| vo.matches?(project: @project) }
  if override.any?
    atp_log("HIER more than one matching override") if override.length > 1
    snippet = override.first.vo_code_snippet
    begin
      result = render_snippet(snippet, { view_override: override.first })
    rescue => e
      atp_log "Override exception: project ##{@project.id}"
      atp_log "Override exception: controller #{controller_name}"
      atp_log "Override exception: action #{action_name}"
      raise
    end
  end
  to_render = result.present? ? result : (render partial: 'original_show')
%>
<%= render partial: 'z_app_engine/requested_assets' %>
<%= to_render %>
